@{
    ViewData["Title"] = "DragAndDrop";
    Layout = "~/Views/Shared/_DefaultLayout.cshtml";
}

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

<style>
        a.btn {
      margin: 10px 1px;
      margin-top: 5px;
    }
    #modules {
        padding: 20px;
        background: #eee;
        margin-bottom: 20px;
        z-index: 1;
        border-radius: 10px;
    }

    #dropzone {
        padding: 20px;
        background: #eee;
        min-height: 100px;
        margin-bottom: 20px;
        z-index: 0;
        border-radius: 10px;
    }

    .hover {
        outline: 1px solid blue;
    }

    .drop-item {
        cursor: pointer;
        margin-bottom: 10px;
        background-color: rgb(255, 255, 255);
        padding: 5px 10px;

        position: relative;
    }

        .drop-item .remove {
            position: absolute;
            top: 4px;
            right: 4px;
        }
</style>


<!-- ======= Breadcrumbs ======= -->
<div class="breadcrumbs d-flex align-items-center" style="background-image: url('assets/img/blog-header.jpg');">
    <div class="container position-relative d-flex flex-column align-items-center">

        <h2>Select Criteria</h2>
        <ol>
            <li><a href="/Filtering/FilterOptions">Filter Cities</a></li>
            <li>Select Criteria</li>
        </ol>

    </div>
</div>
<!-- End Breadcrumbs -->
<section id="why-us" class="why-us">
    <div class="container" data-aos="fade-up">
        <div class="section-header">
            <div class="container">
                <h2><small>Please select the 4 criteria that you pay most attention to when moving from the criteria in the list below. Drag and drop the criteria you selected to the right and click "save".</small></h2>
                <div class="row">
                    <div class="col-sm-6">
                        <div id="modules">
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Business Freedom</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Safety</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Commute</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Startups</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Cost of living</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Education</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Environmental Quality</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Housing</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Leisure&Culture</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Taxation</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Economy</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Travel Connectivity</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Healthcare</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Healthcare</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Internet Access</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Outdoors</a></p>
                            <p class="drag" style="display: inline"><a class="btn btn-warning btn-sm">Tolerance</a></p>
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div id="dropzone"></div>
                        <button class="btn btn-primary pull-right" onclick="SelectedCriteria()">Save And Continue<i class="bi bi-arrow-right-short"></i></button>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<script>

    const limtFour= [];

    $('.drag').draggable({
        appendTo: 'body',
        helper: 'clone'
    });

    $('#dropzone').droppable({
        activeClass: 'active',
        hoverClass: 'hover',
        accept: ":not(.ui-sortable-helper)", // Reject clones generated by sortable
        drop: function (e, ui) {
            var $el = $('<div class="drop-item">' + ui.draggable.text() + ' </div>');
            $el.append($('<button type="button"><i class="bi bi-trash"></i></button>').click(function () { $(this).parent().detach(); }));
            $(this).append($el);
        }
    }).sortable({
        items: '.drop-item',
        sort: function () {
            // gets added unintentionally by droppable interacting with sortable
            // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
            $(this).removeClass("active");
        }
    });

    const dropZone = $('#drop-zone');
    const maxElements = 2; // Maximum number of elements allowed in the drop zone

    // Handle the drop event
    dropZone.on('drop', (e) => {
        // Get the number of elements currently in the drop zone
        const numElements = dropZone.find('.drop-item').length;
        console.log(numElements);
        // If the number of elements in the drop zone is greater than or equal to the maximum,
        // prevent the default action (which is to add the element to the drop zone)
        if (numElements >= maxElements) {
            e.preventDefault();
        }
    });


</script>

